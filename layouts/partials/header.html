<div id="overlay" onclick="removeHash();"></div>
<div id="side-menu">
  <div class="close" onclick="removeHash();">✕</div>
  <div class="menu-container">
    <div class="navigation">
      Menus
      {{ $currentPage := .  }}
      {{ range .Site.Menus.main }}
      <li class="nav-item {{ .Identifier }}">
        <a class="nav-link"
        href="{{ .URL }}">
        {{ .Name }} 
      </a>
      </li>
      {{ end }}
      <a href="#login">login</a>
      <a href="#register">register</a>
    </div>
    <div class="login-container">
      <div class="register">
        <h1>Register</h1>
        <p>or <a href="#login">sign in</a> to your account</p>
        <input type="text" placeholder="Full name"><br>
        <input type="text" placeholder="Email"><br>
        <input type="password" placeholder="Password"><br>
        <input type="password" placeholder="Confirm password"><br>
      </div>
      <div class="login">
        <h1>Login</h1>
        <p>Don’t have an account? <a href="#register">Sign up</a></p>
        <input type="text" placeholder="Email"><br>
        <input type="password" placeholder="Password"><br>
        <button class="cta-btn">Login</button><br>
        <button>Sign up with Github</button><br>
        <a href="#">Forgot password?</a>
      </div>
    </div>
  </div>
</div>

<nav class="container navbar-expand">
  <div class="row">
    <div class="col-lg-12 navbar p-md-0">
      <a class="navbar-brand" href="/">
        <img class="logo-main pl-md-1 pb-1" src="/images/v2/logo-dashbird-withtext.svg" alt="">
      </a>
      <ul class="navbar-nav mr-auto">
        {{ range .Site.Menus.main }}
        <li class="nav-item d-none d-md-block">
          <a class="nav-link" href="{{ .URL }}">{{ .Name }}</a>
        </li>
        {{ end }}
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item d-none d-md-block">
          <a class="nav-link" href="#login">Log in</a>
        </li>
        <li class="nav-item d-none d-md-block">
          <a class="nav-link" href="#register">Register</a>
        </li>
        <li class="nav-item d-md-none d-md-none">
          <a href="#menu">
            <img src="/images/v2/navbar-burger-icon.svg" alt="">
          </a>
        </li>
      </ul>
  </div>
</nav>

<style>
  .navbar-expand {
    margin-top: 1rem;
  }
  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: rgba(0,0,0,0.5);
    z-index: 100;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.6s;
  }
  #overlay.show {
    opacity: 1;
    pointer-events: unset;
  }
  #side-menu {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 20rem;
    margin: .75rem;
    border-radius: 1rem;
    background: white;
    z-index: 101;
    transform: translateX(120%);
    transition: all 0.4s cubic-bezier(0, 0, 0.1, 1);
    overflow: hidden;
    color: black;
  }
  #side-menu.show {
    transform: translateX(0%);
  }
  .close {
    position: absolute;
    top: .5rem;
    right: .5rem;
    z-index: 1;
  }
  .menu-container {
    width: 200%;
    height: 100%;
    display: flex;
    transition: transform .3s;
  }
  #side-menu.menu .menu-container {
    transform: translateX(0%);
  }
  #side-menu .login, #side-menu .register {
    transition: all .3s;
  }
  #side-menu.login .menu-container, #side-menu.register .menu-container {
    transform: translateX(-50%);
  }
  #side-menu.register .login-container .login {
    transform: translateX(-30%);
    opacity: 0;
    pointer-events: none;
  }
  #side-menu.login .login-container .register {
    transform: translateX(30%);
    opacity: 0;
    pointer-events: none;
  }
  .navigation {
    width: 50%;
    height: 100%;
  }
  @media (min-width: 768px) {
    img.logo-main {
      margin-bottom: 0.4rem;
      height: 1.5rem;
    }
  }
  a.nav-link {
    color: white;
    font-family: 'Reno Mono', monospace;
    font-size: .75rem;
  }
  a.nav-link:hover {
    text-decoration: underline;
  }
  .login-container {
    width: 50%;
    height: 100%;
    position: relative;
  }
  .register {
    position: absolute;
    width: 100%;
  }
  .login {
    position: absolute;
    width: 100%;
  }
  .register, .login {
    padding: 1rem;
  }
  @media (max-width: 768px) {
    #side-menu {
      margin: 0;
      border-radius: 0;
      width: 100%;
    }
  }
</style>

<script>
  var $sideMenu = document.querySelector('#side-menu')
  var $overlay = document.querySelector('#overlay')
  var hashTriggers = ['#menu', '#login', '#register']
  window.onpopstate = function () {
    const hash = window.location.hash
    if (hashTriggers.find(function (str) {return str === hash})) {
      $sideMenu.className = 'show'
      $overlay.classList.add('show')
      switch (hash) {
        case '#menu':
          $sideMenu.classList.add('menu')
          break
        case '#login':
          $sideMenu.classList.add('login')
          break
        case '#register':
          $sideMenu.classList.add('register')
          break
      }
    } else if (hash === '') {
      $sideMenu.className = ''
      $overlay.className = ''
    }
  }
  function removeHash () {
    var state = ''
    var popStateEvent = new PopStateEvent('popstate', { state: state })
    history.pushState(state, document.title, window.location.pathname + window.location.search)
    dispatchEvent(popStateEvent)
  }
</script>